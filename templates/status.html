<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Records Queue</title>
  <style>
    #results {
      max-height: 400px;
      overflow: scroll;
    }

  </style>
</head>

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function() {
    // Server-Side Events
    var resultdiv = document.getElementById("results");
      var eventSource = new EventSource("{{ url_for('stream') }}");
      eventSource.onmessage = function(e) {
        resultdiv.innerHTML = e.data + "\n<br>\n" + resultdiv.innerHTML;
      };
      eventSource.onerror = function(e) {
        eventSource.close();
      };
  });
</script>

<body id="body">
    <h2>Prime Gap Records Queue</h2>

    <div id="recent">
    {% if recent %}
      <h2>Recent records checked</h2>
    {% for r in recent %}
      <div>{{ r }}</div>
    {% endfor %}
    {% endif %}
    </div>
    <div id="queue">
      <h2>{{queued}} Queued</h2>
    {% for line in queue %}
      <div>{{ line.join(", ") }}</div>
    {% endfor %}
    </div>

    <hr>
    <div id="results">{{status}}</div>
    <hr>
</body>
</html>
